<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El Viaje del Beagle ‚Äî Cronolog√≠a y Teor√≠a de la Evoluci√≥n</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/scrollreveal"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {font-family: 'Inter', sans-serif; background-color: #f9fafb; color: #1f2937;}
    .timeline {border-left: 4px solid #2563eb; margin: 2rem auto; padding: 1rem; max-width: 800px;}
    .event {margin-left: 1rem; padding: 1rem 0; position: relative;}
    .event::before {content: '‚öì'; position: absolute; left: -1.5rem; top: 1rem; font-size: 1.2rem; color: #2563eb;}
    #map {height: 500px; border-radius: 1rem; margin-top: 1.5rem;}
  </style>
</head>
<body class="p-6">
  <header class="text-center mb-8">
    <h1 class="text-3xl font-bold mb-2">üß≠ El viaje del Beagle y el nacimiento de la selecci√≥n natural</h1>
    <p class="text-gray-600">Una cronolog√≠a interactiva del viaje de Charles Darwin (1831‚Äì1836)</p>
  </header>  <section id="map"></section>  <section class="timeline mt-8">
    <div class="event"><h3>1Ô∏è‚É£ 1831 ‚Äî Embarque en Plymouth</h3><p>Darwin zarpa el 27 de diciembre de 1831 a bordo del HMS Beagle como acompa√±ante del capit√°n Robert FitzRoy.</p></div>
    <div class="event"><h3>2Ô∏è‚É£ 1832 ‚Äî Brasil</h3><p>En Bah√≠a y R√≠o de Janeiro, Darwin se maravilla ante la biodiversidad tropical. <em>‚ÄúEs como entrar en un nuevo mundo.‚Äù</em></p></div>
    <div class="event"><h3>3Ô∏è‚É£ 1833‚Äì1834 ‚Äî Argentina y Patagonia</h3><p>Excava f√≥siles de mam√≠feros gigantes extintos y observa la geolog√≠a din√°mica de la regi√≥n.</p></div>
    <div class="event"><h3>4Ô∏è‚É£ 1835 ‚Äî Chile y el terremoto de Concepci√≥n</h3><p>Presencia el levantamiento del terreno tras un gran terremoto, comprendiendo que la Tierra cambia con el tiempo.</p></div>
    <div class="event"><h3>5Ô∏è‚É£ 1835 ‚Äî Islas Gal√°pagos</h3><p>En septiembre, observa tortugas y pinzones cuyas variaciones inspiran m√°s tarde su teor√≠a sobre el origen de las especies.</p></div>
    <div class="event"><h3>6Ô∏è‚É£ 1836 ‚Äî Regreso a Inglaterra</h3><p>El Beagle regresa el 2 de octubre de 1836 tras casi cinco a√±os. Darwin comienza a analizar los datos recolectados.</p></div>
    <div class="event"><h3>7Ô∏è‚É£ 1858 ‚Äî Coincidencia con Wallace</h3><p>Recibe el manuscrito de Alfred Russel Wallace con ideas semejantes sobre la selecci√≥n natural; presentan ambos trabajos ante la Sociedad Linneana.</p></div>
    <div class="event"><h3>8Ô∏è‚É£ 1859 ‚Äî Publicaci√≥n de <em>El origen de las especies</em></h3><p>El 24 de noviembre de 1859, Darwin publica su obra fundamental que transforma la biolog√≠a moderna.</p></div>
  </section>  <section class="mt-12 max-w-3xl mx-auto">
    <h2 class="text-2xl font-semibold mb-4">üìò Notas cr√≠ticas</h2>
    <p>Este recorrido ilustra la transici√≥n del pensamiento naturalista cl√°sico a la biolog√≠a moderna. Darwin no descubri√≥ la selecci√≥n natural de inmediato: sus ideas maduraron lentamente al integrar geolog√≠a, observaci√≥n y comparaci√≥n. Las cartas y cuadernos de notas muestran que la idea clave emergi√≥ hacia 1838, tras leer el ensayo de Malthus. El hallazgo independiente de Wallace en 1858 impuls√≥ su publicaci√≥n. La teor√≠a, ampliada en el siglo XX con la gen√©tica, dio lugar a la S√≠ntesis Moderna de la evoluci√≥n.</p>
  </section> 
<script>
  const map = L.map('map').setView([0, -30], 2);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);

  const rawRuta = [
    [50.37, -4.14],     // Plymouth
    [38.70, -9.13],     // Lisboa
    [-12.97, -38.50],   // Bah√≠a
    [-22.90, -43.20],   // R√≠o de Janeiro
    [-34.60, -58.38],   // Buenos Aires
    [-51.62, -69.22],   // Puerto Deseado
    [-53.16, -70.90],   // Punta Arenas
    [-42.77, -65.03],   // Puerto Madryn
    [-33.45, -70.66],   // Santiago de Chile
    [-0.90, -90.97],    // Gal√°pagos
    [-33.87, 151.21],   // S√≠dney
    [19.43, -99.13],    // M√©xico (escala)
    [50.37, -4.14]      // regreso
  ];

  // Convert degrees to radians
  const rad = d => d * Math.PI / 180;
  const deg = r => r * 180 / Math.PI;

  function breakAtAntimeridian(coords) {
    const broken = [];
    for (let i = 0; i < coords.length - 1; i++) {
      const [lat0, lon0] = coords[i];
      const [lat1, lon1] = coords[i + 1];
      broken.push([lat0, lon0]);
      let dLon = lon1 - lon0;
      if (Math.abs(dLon) > 180) {
        // Convert to radians
        const lat0r = rad(lat0), lon0r = rad(lon0);
        const lat1r = rad(lat1), lon1r = rad(lon1);
        // Cartesian coords
        const x0 = Math.cos(lon0r) * Math.sin(lat0r);
        const y0 = Math.sin(lon0r) * Math.sin(lat0r);
        const z0 = Math.cos(lat0r);
        const x1 = Math.cos(lon1r) * Math.sin(lat1r);
        const y1 = Math.sin(lon1r) * Math.sin(lat1r);
        const z1 = Math.cos(lat1r);
        const t = y1 / (y1 - y0);
        const x = t * x0 + (1 - t) * x1;
        const z = t * z0 + (1 - t) * z1;
        const lat2 = deg(Math.atan(z / x));

        // Choose the right sign for longitude
        const lonBreak0 = lon0 > 0 ? 180 : -180;
        const lonBreak1 = lon1 > 0 ? 180 : -180;
        broken.push([lat2, lonBreak0]);
        broken.push([lat2, lonBreak1]);
      }
    }
    broken.push(coords[coords.length - 1]);
    return broken;
  }

  const ruta = breakAtAntimeridian(rawRuta);

  // Draw each continuous segment separately
  let segment = [];
  for (let i = 0; i < ruta.length; i++) {
    segment.push(ruta[i]);
    if (i < ruta.length - 1) {
      const lon = ruta[i][1], nextLon = ruta[i + 1][1];
      if (Math.abs(lon - nextLon) > 180) {
        L.polyline(segment, {color: 'blue', weight: 3, opacity: 0.7}).addTo(map);
        segment = [];
      }
    }
  }
  if (segment.length > 1)
    L.polyline(segment, {color: 'blue', weight: 3, opacity: 0.7}).addTo(map);

  const puntos = [
    {coords: [50.37, -4.14], texto: '‚öì Plymouth (Inicio y fin)'},
    {coords: [-12.97, -38.50], texto: 'üå¥ Bah√≠a (Brasil)'},
    {coords: [-34.60, -58.38], texto: 'ü¶¥ Argentina ‚Äî f√≥siles gigantes'},
    {coords: [-33.45, -70.66], texto: 'üåã Chile ‚Äî terremoto 1835'},
    {coords: [-0.90, -90.97], texto: 'üê¢ Gal√°pagos'},
    {coords: [-33.87, 151.21], texto: 'üá¶üá∫ S√≠dney (Australia)'}
  ];
  puntos.forEach(p => L.marker(p.coords).addTo(map).bindPopup(p.texto));
  map.fitBounds(L.latLngBounds(ruta));
</script></body>
</html>
